{
  "query": "\n-- Schritt 1: Setze ALLE user_progress Eintr채ge auf 'in_progress'\nUPDATE user_progress up\nJOIN users u ON up.userId = u.id\nSET up.status = 'in_progress', up.completedAt = NULL\nWHERE u.email = 'testyou@me.com';\n\n-- Schritt 2: Setze nur Topics mit beantworteten Fragen auf 'completed'\nUPDATE user_progress up\nJOIN users u ON up.userId = u.id\nSET up.status = 'completed', up.completedAt = NOW()\nWHERE u.email = 'testyou@me.com'\n  AND up.topicId IN (\n    SELECT DISTINCT qp.topicId \n    FROM question_progress qp\n    JOIN users u2 ON qp.userId = u2.id\n    WHERE u2.email = 'testyou@me.com'\n      AND qp.firstAttemptStatus != 'unanswered'\n  );\n\n-- Schritt 3: Pr체fe Ergebnis\nSELECT \n  up.courseId,\n  COUNT(*) as total_topics,\n  SUM(CASE WHEN up.status = 'completed' THEN 1 ELSE 0 END) as completed_topics,\n  SUM(CASE WHEN up.status = 'in_progress' THEN 1 ELSE 0 END) as in_progress_topics\nFROM user_progress up\nJOIN users u ON up.userId = u.id\nWHERE u.email = 'testyou@me.com'\nGROUP BY up.courseId;\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3wc5j91T7XwfNX4.406ada0c06a9 --database RXc4pG5Wbo6eGZhnWSXpwa --execute \n-- Schritt 1: Setze ALLE user_progress Eintr채ge auf 'in_progress'\nUPDATE user_progress up\nJOIN users u ON up.userId = u.id\nSET up.status = 'in_progress', up.completedAt = NULL\nWHERE u.email = 'testyou@me.com';\n\n-- Schritt 2: Setze nur Topics mit beantworteten Fragen auf 'completed'\nUPDATE user_progress up\nJOIN users u ON up.userId = u.id\nSET up.status = 'completed', up.completedAt = NOW()\nWHERE u.email = 'testyou@me.com'\n  AND up.topicId IN (\n    SELECT DISTINCT qp.topicId \n    FROM question_progress qp\n    JOIN users u2 ON qp.userId = u2.id\n    WHERE u2.email = 'testyou@me.com'\n      AND qp.firstAttemptStatus != 'unanswered'\n  );\n\n-- Schritt 3: Pr체fe Ergebnis\nSELECT \n  up.courseId,\n  COUNT(*) as total_topics,\n  SUM(CASE WHEN up.status = 'completed' THEN 1 ELSE 0 END) as completed_topics,\n  SUM(CASE WHEN up.status = 'in_progress' THEN 1 ELSE 0 END) as in_progress_topics\nFROM user_progress up\nJOIN users u ON up.userId = u.id\nWHERE u.email = 'testyou@me.com'\nGROUP BY up.courseId;\n",
  "rows": [
    {
      "courseId": "30002",
      "total_topics": "12",
      "completed_topics": "3",
      "in_progress_topics": "9"
    }
  ],
  "messages": [],
  "stdout": "courseId\ttotal_topics\tcompleted_topics\tin_progress_topics\n30002\t12\t3\t9\n",
  "stderr": "",
  "execution_time_ms": 88
}